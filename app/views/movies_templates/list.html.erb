<h1>List of all movies</h1>

<table border="1">
  <tr>
    <th>ID</th>
    <th>Image</th>
    <th>Title</th>
    <th>Year</th>
    <th>Director</th>
    <th></th>
  </tr>

  <% Movie.all.each do |this_movie| %>
    <tr>
      <td><%= this_movie.id %></td>
      <td>
        <img src = "<%= this_movie.image %>" width = "200">
      </td>
      <td><%= this_movie.title %></td>
      <td><%= this_movie.year %></td>
      <td>
        <% matching_records = Director.where({ :id  => this_movie.director_id }) %>
        <% the_director = matching_records.at(0) %>
        <%= the_director.name %>
      </td>
      <td><a href = "/movies/<%= this_movie.id %>">Show details</a></td> 
    </tr>
  <% end %>

</table>
